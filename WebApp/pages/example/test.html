<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<title>测试</title>
	<!-- <link rel="icon" type="image/x-icon" href="favicon.ico"/> -->
	<!-- 
	<link rel="stylesheet" href="../../static/plugins/bootstrap-3.3.7/css/bootstrap.min.css" />
	<script type="text/javascript" src="../../static/plugins/jquery-2.1.1/jquery-2.1.1.js"></script>
	<script type="text/javascript" src="../../static/plugins/bootstrap-3.3.7/js/bootstrap.min.js"></script>
	<link rel="stylesheet" href="../../static/plugins/bootstrap-fileinput-4.4.6/css/fileinput.css" />
	<script type="text/javascript" src="../../static/plugins/bootstrap-fileinput-4.4.6/js/fileinput.js"></script>
	<script type="text/javascript" src="../../static/plugins/bootstrap-fileinput-4.4.6/js/locales/zh.js"></script>
	 -->
	 
	<script type="text/javascript" src="../../static/js/include.js"></script>
	<script type="text/javascript" src="../../static/js/includeTemplate0.js"></script>
	
</head>
<body>
	
	<input id="input-id" type="file" name="files[]" multiple class="file input-sm inputBtn">
	<!-- 
		
		strNEInput : 提示有误
		strGMInput : 提示有误
		strGHInput ：  提示有误
		strLMInput ：  提示有误
		
		lenNEInput : 提示有误
		
		numNEInput ：提示有误
		
		dateNEInput ： 提示有误
		
		strictNegativeNum : 不能有正号，可以有负号、小数点。
		
	 -->
	
	<script type="text/javascript">
		//附件上传按钮
		$(".inputBtn").fileinput({
			language : "zh",
			showCaption : true,
			browseClass : "btn btn-default btn-sm",
			uploadExtraData : {category:'ckht'},
			dropZoneEnabled : false,
			showPreview : false,
			removeClass : "btn btn-default btn-sm",
			uploadClass : "btn btn-default btn-sm",
			//captionClass : "input-sm block",
			uploadUrl : "../../../../attachment/upload",
		}).on("change",function(e,file){
			//$('#input-id').fileinput('refresh', {uploadExtraData : {id: $("#addInfoForm input[name='ckht']").val()}});
			// console.log($(this).attr("data_type"));
			//console.log(this.getAttribute("data_type"));
	
		}).on("fileuploaded", function(event, data, previewId, index) {
			var fj = data.response.data.fj;
			var type = $(this).attr("data_type");
			if(type == 'htywj'){
				$("#fj1").val(fj+"-"+type);
			}else if(type == 'tbwj'){
		        $("#fj2").val(fj+"-"+type);
			}else if(type == 'zbwj'){
		        $("#fj3").val(fj+"-"+type);
			}else{
		        $("#fj4").val(fj+"-"+type);
			}
	
			layer.msg("上传成功，附件id为："+data.response.data.fj);
		});
	</script>
</body>
</html>


